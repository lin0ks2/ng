/* MOYAMOVA — tokens.css
 * Patch: remove gray tap flash, scale icons on active/press, adjust burger active color/scale
 * - No tap highlight on iOS/Android
 * - Footer icons: passive=*_dark, hover=*_hover (desktop), active=*.svg
 * - Active tab and press → icon scales up slightly (no gray flash)
 */
:root{
  --brand: #1fb6ff;
  --brand-dark: #0ea5e9;
  --burger: var(--brand);

  /* Header sizing */
  --header-pad-x: 14px;
  --header-pad-top-min: 8px;
  --header-pad-bottom: 8px;
  --safe-top: env(safe-area-inset-top, 0px);
  --safe-bottom: env(safe-area-inset-bottom, 0px);

  /* Typography */
  --title-size: 26px;
  --logo-size: 44px;
  --gap-tight: 8px;

  /* Footer */
  --footer-h: 60px;
  --footer-sep: #e5e7eb;
  --footer-bg: #fff;
  --footer-fg: #333;            /* пассивный цвет, также для бургер-актив */
  --nav-gap: 12px;
  --nav-icon-size: 28px;
}

@media (min-width: 480px){
  :root{ --title-size: 28px; --logo-size: 48px; --nav-icon-size: 30px; }
}

html, body { margin:0; padding:0; }
*{ -webkit-tap-highlight-color: transparent; } /* убираем серый мерцательный хайлайт на iOS/Android */
body{
  font-family: system-ui, -apple-system, 'Segoe UI', Roboto, Arial, sans-serif;
  background:#fff; color:#111;
}

/* Header */
.header{
  position: sticky;
  top: 0;
  z-index: 1000;
  display:flex; align-items:center; justify-content:space-between;
  padding: 0 var(--header-pad-x);
  padding-top: max(var(--safe-top), 8px);
  padding-bottom: var(--header-pad-bottom);
  background:#fff;
  border-bottom:1px solid #dfe3e8;
}
.brand{ display:flex; align-items:center; }
.brand-link{ display:flex; align-items:center; gap: var(--gap-tight); color:inherit; text-decoration:none; }
.brand img{ width: var(--logo-size); height: var(--logo-size); }
.brand-title{
  font-family: 'Montserrat', system-ui, -apple-system, 'Segoe UI', Roboto, Arial, sans-serif;
  font-weight:700; font-size:var(--title-size); line-height:1.05; margin:0;
}

/* Burger */
.burger{
  font-size:32px; line-height:1; color:var(--burger);
  background:none; border:0; cursor:pointer;
  -webkit-appearance:none; appearance:none; outline: none;
  transition: transform .1s ease, color .12s ease;
}
/* На нажатие — увеличиваем и красим как пассивные иконки из футера */
.burger:active{ color: var(--footer-fg); transform: scale(1.06); }

/* Content bottom padding so footer never overlaps */
.content{ padding:16px; padding-bottom: calc(var(--footer-h) + var(--safe-bottom) + 12px); }

/* Footer nav */
.app-footer{
  position: fixed;
  left:0; right:0; bottom:0;
  height: calc(var(--footer-h) + var(--safe-bottom));
  display:grid;
  grid-template-columns: repeat(5, minmax(0, 1fr));
  column-gap: var(--nav-gap);
  padding-left: var(--nav-gap);
  padding-right: var(--nav-gap);
  background: var(--footer-bg);
  color: var(--footer-fg);
  border-top: 1px solid var(--footer-sep);
  border-bottom: 1px solid var(--footer-sep);
  z-index: 1000;
  padding-bottom: var(--safe-bottom);
  box-shadow: 0 -1px 2px rgba(0,0,0,.05);
}
.app-footer .nav-btn{
  display:flex; align-items:center; justify-content:center;
  margin:0; padding: 8px 4px 10px;
  background: transparent; border: 0;
  color: inherit; font: inherit;
  cursor: pointer; width: 100%;
  -webkit-appearance:none; appearance:none; outline: none;
}

/* Icon spans with background images */
.nav-icon{
  width: var(--nav-icon-size);
  height: var(--nav-icon-size);
  display:block;
  background-repeat:no-repeat;
  background-position:center;
  background-size:contain;
  pointer-events:none;
  user-select:none;
  -webkit-user-select:none;
  transition: transform .12s ease, opacity .15s ease;
}

/* ----- mapping: default PASSIVE (dark) ----- */
.nav-btn [data-icon="home"]    { background-image:url("../img/home_dark.svg"); }
.nav-btn [data-icon="book"]    { background-image:url("../img/book_dark.svg"); }
.nav-btn [data-icon="star"]    { background-image:url("../img/star_dark.svg"); }
.nav-btn [data-icon="warning"] { background-image:url("../img/warning_dark.svg"); }
.nav-btn [data-icon="stats"]   { background-image:url("../img/stats_dark.svg"); }

/* ----- HOVER (desktop) → hover versions ----- */
@media (hover:hover){
  .nav-btn:hover [data-icon="home"]    { background-image:url("../img/home_hover.svg"); }
  .nav-btn:hover [data-icon="book"]    { background-image:url("../img/book_hover.svg"); }
  .nav-btn:hover [data-icon="star"]    { background-image:url("../img/star_hover.svg"); }
  .nav-btn:hover [data-icon="warning"] { background-image:url("../img/warning_hover.svg"); }
  .nav-btn:hover [data-icon="stats"]   { background-image:url("../img/stats_hover.svg"); }
  .nav-btn:hover .nav-icon{ transform: translateY(-1px); }
}

/* ----- ACTIVE TAB → bright versions + немного крупнее постоянно ----- */
.nav-btn.active .nav-icon{ transform: scale(1.06); } /* активная вкладка чуть больше всегда */
.nav-btn.active [data-icon="home"]    { background-image:url("../img/home.svg"); }
.nav-btn.active [data-icon="book"]    { background-image:url("../img/book.svg"); }
.nav-btn.active [data-icon="star"]    { background-image:url("../img/star.svg"); }
.nav-btn.active [data-icon="warning"] { background-image:url("../img/warning.svg"); }
.nav-btn.active [data-icon="stats"]   { background-image:url("../img/stats.svg"); }

/* ----- PRESS FEEDBACK (без серой заливки) → просто лёгкое увеличение ----- */
.nav-btn:active .nav-icon{ transform: scale(1.08); } /* на тап ещё +2px ощущение */

/* ---------- Safari / iOS branch ---------- */
@supports (-webkit-touch-callout: none){
  .header{ padding-top: max(var(--safe-top), 8px); }
  .app-footer{ height: calc(var(--footer-h) + var(--safe-bottom)); padding-bottom: var(--safe-bottom); }
}

/* ---------- Chrome / others ---------- */
@supports not (-webkit-touch-callout: none){
  .header{ padding-top: 8px; }
}

/* ---------- PWA (standalone) ---------- */
@media all and (display-mode: standalone){
  .app-footer{ bottom: calc(-1 * var(--safe-bottom)); }
}

/* ---------- Browser (not PWA) ---------- */
@media all and (display-mode: browser){
  .app-footer{ bottom: -4px; }
}
