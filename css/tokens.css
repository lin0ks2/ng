/* ==========================================================================
   TOKENS.CSS — ИДЕАЛЬНАЯ БАЗА + ПУНКТЫ МЕНЮ (Экспорт/Импорт, Обновления, Версия)
   Важно: шапка, футер, бургер и «рельсы» — без изменений относительно согласованной базы.
   ========================================================================== */

/* =========================
   ПЕРЕМЕННЫЕ
   ========================= */
:root{
  --brand:#1fb6ff;
  --brand-dark:#0ea5e9;
  --burger:var(--brand);

  --header-pad-x:14px;
  --header-pad-bottom:8px;

  --safe-top:env(safe-area-inset-top,0px);
  --safe-bottom:env(safe-area-inset-bottom,0px);

  --title-size:26px;
  --logo-size:44px;
  --gap-tight:8px;

  --footer-h:60px;
  --footer-sep:#e5e7eb;
  --footer-bg:#fff;
  --footer-fg:#333;
  --nav-gap:12px;
  --nav-icon-size:28px;

  --header-h-actual:64px; /* js перезапишет фактической */
  --footer-h-actual:calc(var(--footer-h) + var(--safe-bottom)); /* js перезапишет фактической */
}

@media (min-width:480px){
  :root{ --title-size:28px; --logo-size:48px; --nav-icon-size:30px; }
}

/* =========================
   СБРОСЫ/ОСНОВА
   ========================= */
html,body{ margin:0; padding:0; }
*{ -webkit-tap-highlight-color:transparent; }
body{
  font-family:system-ui,-apple-system,'Segoe UI',Roboto,Arial,sans-serif;
  background:#fff; color:#111;
}
body.menu-open{ overflow:hidden; touch-action:none; }

/* =========================
   ШАПКА
   ========================= */
.header{
  position:sticky; top:0; z-index:1000;
  display:flex; align-items:center; justify-content:space-between;
  padding:0 var(--header-pad-x);
  padding-top:max(var(--safe-top),8px);
  padding-bottom:var(--header-pad-bottom);
  background:#fff; border-bottom:1px solid #dfe3e8;
}
.brand{ display:flex; align-items:center; }
.brand-link{ display:flex; align-items:center; gap:var(--gap-tight); color:inherit; text-decoration:none; }
.brand img{ width:var(--logo-size); height:var(--logo-size); }
.brand-title{
  font-family:'Montserrat',system-ui,-apple-system,'Segoe UI',Roboto,Arial,sans-serif;
  font-weight:700; font-size:var(--title-size); line-height:1.05; margin:0;
}
.burger{
  font-size:32px; line-height:1; color:var(--burger);
  background:none; border:0; cursor:pointer;
  -webkit-appearance:none; appearance:none; outline:none;
  transition:transform .1s ease,color .12s ease;
}
body.menu-open .burger{ color:var(--footer-fg); transform:scale(1.06) }
.burger:active{ transform:scale(1.08) }

/* =========================
   КОНТЕНТ
   ========================= */
.content{ padding:16px; padding-bottom:calc(var(--footer-h) + var(--safe-bottom) + 12px) }

/* =========================
   ФУТЕР (нижняя навигация)
   ========================= */
.app-footer{
  position:fixed; left:0; right:0; bottom:0;
  height:calc(var(--footer-h) + var(--safe-bottom));
  display:grid; grid-template-columns:repeat(5,minmax(0,1fr));
  column-gap:var(--nav-gap); padding-left:var(--nav-gap); padding-right:var(--nav-gap);
  background:var(--footer-bg); color:var(--footer-fg);
  border-top:1px solid var(--footer-sep); border-bottom:1px solid var(--footer-sep);
  z-index:1000; padding-bottom:var(--safe-bottom);
  box-shadow:none;
}
.app-footer .nav-btn{
  display:flex; align-items:center; justify-content:center;
  margin:0; padding:8px 4px 10px;
  background:transparent; border:0; color:inherit; font:inherit; cursor:pointer; width:100%;
  -webkit-appearance:none; appearance:none; outline:none;
}
.nav-icon{
  width:var(--nav-icon-size); height:var(--nav-icon-size);
  display:block; background-repeat:no-repeat; background-position:center; background-size:contain;
  pointer-events:none; user-select:none; -webkit-user-select:none;
  transition:transform .12s ease, opacity .15s ease;
}

/* Иконки футера */
.nav-btn [data-icon="home"]   { background-image:url("../img/home_dark.svg") }
.nav-btn [data-icon="book"]   { background-image:url("../img/book_dark.svg") }
.nav-btn [data-icon="star"]   { background-image:url("../img/star_dark.svg") }
.nav-btn [data-icon="warning"]{ background-image:url("../img/warning_dark.svg") }
.nav-btn [data-icon="stats"]  { background-image:url("../img/stats_dark.svg") }
@media (hover:hover){
  .nav-btn:hover [data-icon="home"]   { background-image:url("../img/home_hover.svg") }
  .nav-btn:hover [data-icon="book"]   { background-image:url("../img/book_hover.svg") }
  .nav-btn:hover [data-icon="star"]   { background-image:url("../img/star_hover.svg") }
  .nav-btn:hover [data-icon="warning"]{ background-image:url("../img/warning_hover.svg") }
  .nav-btn:hover [data-icon="stats"]  { background-image:url("../img/stats_hover.svg") }
  .nav-btn:hover .nav-icon{ transform:translateY(-1px) }
}
.nav-btn.active .nav-icon{ transform:scale(1.06) }
.nav-btn.active [data-icon="home"]   { background-image:url("../img/home.svg") }
.nav-btn.active [data-icon="book"]   { background-image:url("../img/book.svg") }
.nav-btn.active [data-icon="star"]   { background-image:url("../img/star.svg") }
.nav-btn.active [data-icon="warning"]{ background-image:url("../img/warning.svg") }
.nav-btn.active [data-icon="stats"]  { background-image:url("../img/stats.svg") }
.nav-btn:active .nav-icon{ transform:scale(1.08) }

/* =========================
   OFF-CANVAS (гамбургер)
   ========================= */
.oc-root{ position:fixed; inset:0; z-index:1100; pointer-events:none; }
.oc-overlay,.oc-panel{ pointer-events:auto; }
.oc-overlay{
  position:fixed; left:0; right:0;
  top:var(--header-h-actual);
  bottom:calc(var(--footer-h-actual) + 0px);
  background:rgba(0,0,0,.18); opacity:0; transition:opacity .18s ease;
}
body.menu-open .oc-overlay{ opacity:1 }
.oc-panel{
  position:fixed; right:0;
  top:var(--header-h-actual);
  bottom:calc(var(--footer-h-actual) + 0px);
  width:50vw; max-width:520px; min-width:280px;
  background:#fff; border:0; box-shadow:none;
  transform:translateX(100%); transition:transform .22s ease;
  display:flex; flex-direction:column;
}
body.menu-open .oc-panel{ transform:translateX(0) }
.oc-header{
  display:flex; align-items:center; justify-content:space-between;
  padding:10px 12px; border-bottom:1px solid #e5e7eb;
}
.oc-title{ font-weight:700; text-align:center; flex:1; }
.oc-back,.oc-close{
  background:transparent; border:0; font-size:20px; cursor:pointer; color:#333;
  -webkit-appearance:none; appearance:none; outline:none;
}
.oc-back{ margin-right:8px } .oc-close{ margin-left:8px }
.oc-body{ overflow:auto; padding:12px; -webkit-overflow-scrolling:touch; }

/* =========================
   ВЕТКИ ОКРУЖЕНИЙ
   ========================= */
@media all and (display-mode:browser){
  .app-footer{ bottom:0 }
}
@media all and (display-mode:standalone){
  .app-footer{ bottom:0; height:var(--footer-h); padding-bottom:0; border-bottom:0; }
}
@supports (-webkit-touch-callout:none){
  @media all and (display-mode:browser){
    .header{ padding-top:max(var(--safe-top),8px) }
    .app-footer{
      height:calc(var(--footer-h) + var(--safe-bottom));
      padding-bottom:var(--safe-bottom);
    }
  }
}

/* =======================================================================
   ПУНКТЫ МЕНЮ ВНУТРИ БУРГЕРА (Тема / Язык / Сложность / Бэкап / Обновления)
   ======================================================================= */

/* Общие */
.menu-item{ padding:14px 12px; display:flex; flex-direction:column; gap:8px; }
.menu-label{ font-weight:600; font-size:15px; color:#333; }

/* Переключатели — общие стили */
.switch{ position:relative; display:inline-block; width:48px; height:28px; }
.switch input{ opacity:0; width:0; height:0; }
.slider{
  position:absolute; inset:0; cursor:pointer; background:#ccc; border-radius:34px;
  transition:background-color .25s;
}
.slider:before{
  content:""; position:absolute; height:22px; width:22px; left:3px; bottom:3px;
  background:#fff; border-radius:50%; transition:transform .25s;
}
input:checked + .slider{ background:var(--burger) }
input:checked + .slider:before{ transform:translateX(20px) }

/* Тема */
.theme-switch{ display:flex; align-items:center; justify-content:center; gap:10px; }
.theme-label{ font-size:14px; color:#666; }

/* Язык */
.lang-switch{ display:flex; align-items:center; justify-content:center; gap:10px; }
.lang-label{ font-size:20px; line-height:1; }
.lang-label.left{ margin-right:4px } .lang-label.right{ margin-left:4px }

/* Сложность */
.level-switch{ display:flex; align-items:center; justify-content:center; gap:10px; }
.level-label{ font-size:20px; line-height:1; display:flex; align-items:center; justify-content:center; }
.level-label.left{ margin-right:4px } .level-label.right{ margin-left:4px }

/* Пустая прокладка перед блоком бэкапа */
.menu-spacer{ height:8px }

/* Резервное копирование */
.backup-tools .backup-row{
  display:grid; grid-template-columns:1fr 1fr; gap:12px; margin-top:6px;
}
.backup-btn{
  display:inline-flex; align-items:center; justify-content:center;
  padding:12px 14px; border:0; border-radius:12px;
  font-weight:700; font-size:16px;
  background:var(--brand); color:#fff; cursor:pointer;
  -webkit-appearance:none; appearance:none; outline:none; box-shadow:0 1px 0 rgba(0,0,0,.05);
  transition:transform .08s ease, filter .12s ease, background .12s ease;
}
.backup-btn:active{ transform:scale(.98) }
@media (hover:hover){ .backup-btn:hover{ filter:saturate(110%) } }

/* Обновления */
.updates-check .updates-row{ display:flex; justify-content:center; }
.primary-btn{
  display:inline-flex; align-items:center; justify-content:center;
  padding:12px 16px; min-width:240px; max-width:100%;
  border:0; border-radius:12px; background:var(--brand); color:#fff;
  font-weight:700; font-size:16px; cursor:pointer; box-shadow:0 1px 0 rgba(0,0,0,.05);
  transition:transform .08s ease, filter .12s ease, background .12s ease;
}
.primary-btn:active{ transform:scale(.98) }
@media (hover:hover){ .primary-btn:hover{ filter:saturate(110%) } }

/* Версия — строка между «Обновления» и нижним рядом кнопок */
.menu-version{
  padding:10px 12px 14px;
  text-align:center;
  color:#5b6470;
  font-size:14px;
}

/* Нижний ряд быстрых действий (5 кнопок, без кружков) */
.actions-row-bottom{
  margin-top:auto; /* прижатие к низу off-canvas */
  display:grid; grid-template-columns:repeat(5,1fr);
  align-items:stretch; justify-items:center;
  border-top:1px solid #e5e7eb; border-bottom:1px solid #e5e7eb;
  background:#fff;
}
.actions-row-bottom .action-btn{
  display:grid; place-items:center;
  min-height:64px; width:100%;
  background:transparent; border:0; cursor:pointer;
  -webkit-appearance:none; appearance:none; outline:none;
  font-size:22px; line-height:1;
}
.actions-row-bottom .action-btn:not(:last-child){ border-right:1px solid #eef1f4 }

/* ======================================================================= */
